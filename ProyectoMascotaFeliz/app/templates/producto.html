<!DOCTYPE html>
<html lang="es-CL">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0, user-scalable=no">
  
  {% load static %}
  <link rel="stylesheet icon" href="{% static 'img/dog (1).png' %}">
  {% load static %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  {% load static %}
  <link href="{% static 'css/bootstrap.min.css' %}" type="text/css" rel="stylesheet"> 
  <link href="{% static 'css/bootstrap.css' %}" type="text/css" rel="stylesheet"> 
  <link href="{% static 'css/styles' %}" type="text/css" rel="stylesheet">
  {% load static %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/estilos.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.js"></script>
 
 
  <title>Nuestros Productos - Tu Mascota Feliz</title>
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-light bg-light mb-4" id="barraNav">
    {% load static %} 
      <a href="{% url 'home' %}" id="logoMascotaFeliz">
          <img src="{% static 'img/dog (1).png' %}" alt="logoMascotaFeliz" width="40px">Tu Mascota Feliz
      </a>
      <!-- botón hamburguesa -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
          aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>
      
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'home' %}">Inicio</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'galeria' %}">Nuestros Productos</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'somos' %}">¿Quiénes somos?</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'feriados' %}">Feriados</a>
            </li>
          </ul>
        <br>
            
    {% if user.is_authenticated %}
    <div>
      <a href="#">Bienvenid@ {{user.username}}</a>
      <a href="{% url 'producto' %}" id="userBookStop" class="btn btn-success">Productos </a>
      <a href="{% url 'cliente' %}" id="userBookStop" class="btn btn-success">Clientes </a>
      <a href="{% url 'logout' %}" class="btn btn-primary">Cerrar Sesión</a>
  </div>    
    {% else %} 
    <div>
        <a href="{% url 'register' %}" id="userBookStop" class="btn btn-success">Registrarte </a>
        <a href="{% url 'login' %}" class="btn btn-primary">Iniciar Sesión </a>
    {% endif %}    
        
    </div>
</div>
</nav>
  <main role="main" class="container">
    <div class="c-wrapper">
        <div id="carousel1" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carousel1" data-slide-to="0" class="active"></li>

            </ol>
            <div class="carousel-inner" style="border-radius: 7px;">
                <div class="carousel-item active">
                  <img class="img-fluid" src="{% static 'img/homebanner.png' %}"
                        alt="">

                </div>
        </div>
    </div>
    <hr>
    <div class="row">       
        <div class="col-md">        
            <div class="card">

      <table class="table">
        <thead>
            <tr>
                <th>Id Producto</th>
                <th>Nombre Producto</th>
                <th>Descripcion</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Imagen</th>
                <th>Modificar Producto</th>
                <th>Eliminar Producto</th>
            </tr>
        </thead>
        <tbody>
            {% for ve in productos %}
            <tr>
                <td>{{ve.idProducto }}</td>
                <td>{{ve.nombreProducto }}</td>
                <td>{{ve.descripcion }}</td>
                <td>{{ve.precioProducto }}</td>
                <td>{{ve.stockProducto }}</td>



                {% if ve.imagen %}
                <td scope="row"><img src ="{{ ve.imagen.url }}" style="height: 150px; width: 150px;" alt="..."></td>
                {% else %}
                <td scope="row"><img src ="" style="height: 50px; width: 50px;" alt="No Hay Imagen"></td>       
                {% endif %}


                {% if user.is_authenticated %}
                        <td><a href="{% url 'form_mod_prod' ve.idProducto %}" 
                            class="btn btn-primary">Modificar</a></td>
                        <td><a href="{% url 'form_del_producto' ve.idProducto %}" class="btn btn-danger">Eliminar</a></td>
                {% else %} 
                    <td><a href="#">No tiene permisos para modificar</a></td>
                    <td><a href="#" style="color:red;">No tiene permisos para eliminar</a></td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
      </table>
<div class="container">
    {% if user.is_authenticated %}
    <a href="{% url 'form_crear_producto' %}" class="btn btn-primary">Agrega un Producto</a>
    {% else %} 
        <h2 style="color:red; text-align:center">No tiene permisos para crear clientes</h2>     
    {% endif %}
</div>
</div>
</div>
</div>

</main><br>
<footer>
    <div class="row col-12">
        <div class="col-lg-2">
            <img src="{% static 'img/dog (1).png' %}" alt="logoMascotaFeliz" width="60px">
        </div>
        <div class="col-lg-2">
            <a href="{% url 'home' %}" id="linkFooter"><strong>INICIO</strong></a>
        </div>
        <div class="col-lg-2">
          <a href="{% url 'galeria' %}" id="linkFooter"><strong>PRODUCTOS</strong></a>
        </div>
        <div class="col-lg-2">
          <a href="{% url 'somos' %}" id="linkFooter"><strong>¿QUIÉNES SOMOS?</strong></a>
        </div>

        <div class="col-lg-2">
            <strong>Síguenos</strong>
            <br><br>
            <div class="row">
                <img src="{% static 'img/2000px-Facebook_font_awesome.svg.png' %}" alt="" width="30px" height="30px"
                    style=" margin-left: 15px;">
                <img src="{% static 'img/twitter.png' %}" alt="" width="30px" height="30px" style=" margin-left: 10px;">
                <img src="{% static 'img/Instagram.png' %}" alt="" width="30px" height="30px" style=" margin-left: 10px;">

            </div>
        </div>
        <div class="col-lg-2">

            <strong>Contacto</strong>
            <br><br>
            <div class="row">
                <img src="{% static 'img/location.png' %}" alt="" width="20px" height="20px"
                    style="margin-right: 10px; margin-left: 15px;">
                <p>Av. Esq. Blanca 501, Maipú</p>
            </div>
            <div class="row">
                <img src="{% static 'img/fono.png' %}" alt="" width="20px" height="20px"
                    style="margin-right: 10px; margin-left: 15px;">
                <p>225554000</p>
            </div>
            <div class="row">
                <img src="{% static 'img/email.png' %}" alt="" width="20px" height="20px"
                    style="margin-right: 10px; margin-left: 15px;">
                <p>consulta@tumascotafeliz.cl</p>
            </div>
            <br><br><br>

            <p>Cristian Jara Carter &copy; Copyright Derechos reservados.
                <br><br>Iconos: https://www.flaticon.com/
            </p>
        </div>
    </div>
</footer>

<!-- script que permite mostrar/ocultar navbar haciendo scroll -->
<script type="text/javascript">
    let ubicacionInicial = window.pageYOffset;
    window.onscroll = function () {
        let ubicacionPosterior = window.pageYOffset;
        if (ubicacionInicial >= ubicacionPosterior) {
            document.getElementById("barraNav").style.top = "0";
        }
        else {
            document.getElementById("barraNav").style.top = "-70px";
        }
        ubicacionInicial = ubicacionPosterior
    }
</script>


</body>
</html>